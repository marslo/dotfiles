#!/usr/bin/env bash
#=============================================================================
#     FileName : git-file-size
#       Author : marslo
#      Created : 2026-01-28 00:21:28
#   LastChange : 2026-01-28 09:20:44
#=============================================================================

set -euo pipefail

git rev-parse --is-inside-work-tree >/dev/null 2>&1 || {
  echo "fatal: not a git repository (or any of the parent directories): .git" >&2;
  exit 128
}

git rev-list --objects --all |
  git cat-file --batch-check='%(objectname) %(objecttype) %(objectsize) %(rest)' |
  awk '{printf "%s\t%.2f MB\t%s\n", $1, $3/1024/1024, $4}' |
  sort -rn -k 2 |
  head -10

# vim:tabstop=2:softtabstop=2:shiftwidth=2:expandtab:filetype=sh:
